<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Diagnóstico do Lucro - Janine Borges</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { background-color: #FAF9F6; color: #333333; font-family: sans-serif; }
        .loading-shimmer { background: linear-gradient(90deg, #FAF9F6 25%, #E4C1B9 50%, #FAF9F6 75%); background-size: 200% 100%; animation: shimmer 1.5s infinite; }
        @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-4xl mx-auto space-y-8">
        <header class="text-center py-10">
            <h1 class="text-4xl font-serif text-gray-800">Diagnóstico do <span style="color:#B35C44 italic">Lucro Real</span></h1>
        </header>

        <section class="bg-white p-8 rounded-3xl shadow-sm border border-gray-100">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <input type="number" id="current-price" placeholder="Preço Atual (R$)" class="p-4 bg-gray-50 rounded-xl outline-none">
                <input type="number" id="ideal-price" placeholder="Preço Ideal (R$)" class="p-4 bg-gray-50 rounded-xl outline-none">
                <input type="number" id="sales-volume" placeholder="Vendas/Mês" class="p-4 bg-gray-50 rounded-xl outline-none">
            </div>
            <button onclick="gerar()" class="w-full mt-6 py-4 bg-[#B35C44] text-white font-bold rounded-xl hover:opacity-90 transition-all">GERAR DIAGNÓSTICO</button>
        </section>

        <div id="res" class="hidden space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-center">
                <div class="bg-white p-6 rounded-2xl border border-gray-100"><p class="text-xs uppercase text-gray-400">Diferença</p><p id="d1" class="text-2xl font-bold"></p></div>
                <div class="bg-white p-6 rounded-2xl border border-gray-100"><p class="text-xs uppercase text-gray-400">Impacto Anual</p><p id="d2" class="text-2xl font-bold"></p></div>
            </div>
            <div class="bg-white p-8 rounded-3xl border border-gray-100">
                <div id="load" class="hidden"><div class="h-12 loading-shimmer rounded-lg mb-2"></div><p class="text-center text-xs text-gray-400">Janine está escrevendo...</p></div>
                <p id="txt" class="text-lg leading-relaxed text-gray-700"></p>
            </div>
        </div>
    </div>

    <script>
        async function gerar() {
            const v1 = parseFloat(document.getElementById('current-price').value);
            const v2 = parseFloat(document.getElementById('ideal-price').value);
            const v3 = parseInt(document.getElementById('sales-volume').value);
            const key = "AIzaSyDL0qEa6Hf5yrZu_53RN1f9F4O0KSCVWfE"; // Sua chave inserida

            if(!v1 || !v2 || !v3) return alert("Preencha tudo!");

            document.getElementById('res').classList.remove('hidden');
            document.getElementById('load').classList.remove('hidden');
            document.getElementById('txt').innerText = "";

            const diff = v1 - v2;
            const anual = diff * v3 * 12;
            document.getElementById('d1').innerText = "R$ " + diff.toFixed(2);
            document.getElementById('d2').innerText = "R$ " + anual.toFixed(2);

            try {
                // URL CORRIGIDA PARA O FORMATO QUE FUNCIONA COM SUA CHAVE
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${key}`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ contents: [{ parts: [{ text: `A artesã cobra R$${v1}, mas o ideal é R$${v2}. Ela vende ${v3} por mês. Dê um parecer técnico de mentora em 2 parágrafos.` }] }] })
                });

                const data = await response.json();
                document.getElementById('txt').innerText = data.candidates[0].content.parts[0].text;
            } catch (e) {
                document.getElementById('txt').innerText = "Erro ao gerar parecer. Verifique sua chave no Google AI Studio.";
            } finally {
                document.getElementById('load').classList.add('hidden');
            }
        }
    </script>
</body>
</html>
